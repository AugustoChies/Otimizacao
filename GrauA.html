 <!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>GA</title>
  </head>
  <body>
	  
	   
	   <canvas id="hullcanvas" width="200" height="200" style="border:1px solid #000000;"></canvas>
      
      
       <script src="scan.js"></script>
      
      <script>
          var points = [20];
		  
		  for (i = 0; i < 20; i++) { 
			  var different = true;
			  do{
	      	  var point = {x: Math.floor((Math.random() * 20) - 10) , y: Math.floor((Math.random() * 20) - 10)};
				  different = true;
				  for(j= 0; j < i;j++)
					  {
						  if(point.x == points[j].x  && point.y == points[j].y)
							  {
								  different = false;
								  break;
							  }
					  }
			  }while(!different)
		      points[i] = point;
		  }
		  
		  
		    
   		  var ctx = document.getElementById("hullcanvas").getContext("2d"); 
		 
		  

		  for(i = 0; i < points.length; i++){
		      var pointSize = 3; // Change according to the size of the point.
		  	  ctx.fillStyle = "#000000";
		  	  ctx.beginPath(); //Start path
		  	  ctx.arc(points[i].x*10 + 100, 200 - (points[i].y*10 + 100), pointSize, 0, Math.PI * 2, true); // Draw a point using the arc function of the canvas with a point structure.
			  ctx.fill();
			  
		  }
          
          
          var hullPath = gethull(points);
          
          var edgeList = [];
          var nodes = [];
          
          CreateGraph(points,hullPath);
          
            for(i = 0; i < edgeList.length; i++){
	           ctx.moveTo(nodes[edgeList[i].index1].x*10 + 100, 200 - (nodes[edgeList[i].index1].y*10 + 100));
               ctx.lineTo(nodes[edgeList[i].index2].x*10 + 100,200 - (nodes[edgeList[i].index2].y*10 +100));
	       	   ctx.stroke(); 			  
	           }  
	       
          
          
          function CreateGraph(points,hullPath)
          {
             
              
              // var node = {x:0 , y: 0, edgelist:[]};
              // var edge = {index1:0, index2:0, lenght: 0};              
              
              //push hullpath into nodes and create edges
              for(var i= 0;i < hullPath.length;i++)
                  {
                      var index = findpointindex(hullPath[i],points);
                      points.splice(index,1);  
                      
                      var node= {x:hullPath[i].x , y: hullPath[i].y, edgelist:[], edgeindexlist:[]};
                      nodes.push(node);                      
                  }
              
              for(var i= 0;i < nodes.length - 1;i++)
                  {
                      var edge = {index1:i, index2:i+1, lenght: getDistance(nodes[i],nodes[i+1])};         
                      edgeList.push(edge);
                      
                      nodes[i].edgelist.push(edge);
                      nodes[i].edgeindexlist.push(i);
                      nodes[i+1].edgelist.push(edge);
                      nodes[i+1].edgeindexlist.push(i);
                  }
              var edge = {index1:nodes.length - 1, index2:0, lenght: getDistance(nodes[nodes.length - 1],nodes[0])};         
              edgeList.push(edge);
              
              nodes[nodes.length - 1].edgelist.push(edge);
              nodes[nodes.length - 1].edgeindexlist.push(edgeList.length - 1);
              nodes[0].edgelist.push(edge);
              nodes[0].edgeindexlist.push(edgeList.length - 1);
              
              //add other points to nodes and compute max edge lenght
              for(var i= 0;i < points.length;i++)
                  {
                      var node = {x:points[i].x , y: points[i].y, edgelist:[], edgeindexlist:[]};
                      nodes.push(node);     
                  }
              
              var maiorMenorDistancia = 0;
              
              
              
              for(var i= 0;i < points.length;i++)
                  {
                      var menorDistancia = Infinity;                      
                      for(var j= 0;j < hullPath.length;j++)
                          {
                              var tempdist = getDistance(points[i],hullPath[j]);
                              if(tempdist < menorDistancia)
                                  {
                                      menorDistancia = tempdist;                                      
                                  }
                          }
                      
                      if(menorDistancia > maiorMenorDistancia)
                          {
                              maiorMenorDistancia = menorDistancia;                              
                          }                      
                  }
              
             // console.log(maiorMenorDistancia);
            //  console.log("Hullpoint: x: " + hullPath[jhull].x + " y: " + hullPath[jhull].y);              
              //console.log("Insidepoint: x: " + points[ipoint].x + " y: " + points[ipoint].y);
              
              //creates aditional edges
              //points to hull
              
              //for(var i= 0;i < points.length;i++)
              //    {     
              //        var closesthullpoint;
              //        var chpdistance = Infinity;
              //        for(var j= 0;j < hullPath.length;j++)
              //            {                              
              //                var tempdist = getDistance(points[i],hullPath[j]);
              //                if(tempdist <= maiorMenorDistancia)
              //                    {
              //                       if(tempdist < chpdistance)
              //                           {
              //                               chpdistance = tempdist;
              //                               closesthullpoint = j;
              //                           }
              //                        
              //                    }
              //            }
              //        var edge = {index1:closesthullpoint, index2:i + hullPath.length, lenght: chpdistance};         
              //        edgeList.push(edge);
              //        
              //        nodes[closesthullpoint].edgelist.push(edge);
              //        nodes[closesthullpoint].edgeindexlist.push(edgeList.length - 1);
              //        nodes[i+hullPath.length].edgelist.push(edge);
              //        nodes[i+hullPath.length].edgeindexlist.push(edgeList.length - 1);      
              //                     
              //    }
              
              //one new edge per point for all points(none if no close point remains)
              for(var i= 0;i < nodes.length;i++)
                  {     
                      var closesthullpoint = -2;//no point
                      var edgeammount = Infinity;
                      for(var j= i + 1;j < nodes.length;j++)
                          {                              
                              var tempdist = getDistance(nodes[i],nodes[j]);
                              var tempedgecount = nodes[j].edgelist.length;
                              if(tempdist <= maiorMenorDistancia)
                                  {
                                     var isdifferent = true;
                                     for(var k = 0;k < nodes[i].edgelist.length;k++)
                                         {
                                            if(j == nodes[i].edgelist[k].index1 || j == nodes[i].edgelist[k].index2)
                                                {
                                                    isdifferent=false;
                                                }
                                         }
                                      
                                     if(tempedgecount < edgeammount && isdifferent)
                                         {
                                             edgeammount = tempedgecount;
                                             closesthullpoint = j;
                                         }
                                      
                                  }
                          }
                      if(closesthullpoint != -2)
                          {
                              var edge = {index1:closesthullpoint, index2:i, lenght: getDistance(nodes[i],nodes[closesthullpoint])};         
                              edgeList.push(edge);
                              
                              nodes[closesthullpoint].edgelist.push(edge);
                              nodes[closesthullpoint].edgeindexlist.push(edgeList.length - 1);
                              nodes[i].edgelist.push(edge);
                              nodes[i].edgeindexlist.push(edgeList.length - 1);                              
                          }
                                   
                  }
              
              
             
             
              
			  
		  }
          
      </script>
  
  </body>
</html>
